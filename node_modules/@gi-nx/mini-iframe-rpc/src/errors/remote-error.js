"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.RemoteError = exports.errorToJSON = void 0;
const mini_iframe_error_1 = require("./mini-iframe-error");
function errorToJSON(err) {
    // message, name, stack are not ennumerable, so we must explicitly get them.
    const { message, name, stack } = err;
    return Object.assign({ message, stack, name }, err);
}
exports.errorToJSON = errorToJSON;
const causeToMessage = (cause) => {
    if (typeof cause === 'string') {
        return cause;
    }
    else {
        return `${cause.message}`;
    }
};
class RemoteError extends mini_iframe_error_1.MiniIframeError {
    constructor(cause) {
        super(causeToMessage(cause));
        this.cause = typeof cause === 'string' ? cause : errorToJSON(cause);
        this.name = RemoteError.name; // stack traces display correctly now
    }
}
exports.RemoteError = RemoteError;
//# sourceMappingURL=remote-error.js.map